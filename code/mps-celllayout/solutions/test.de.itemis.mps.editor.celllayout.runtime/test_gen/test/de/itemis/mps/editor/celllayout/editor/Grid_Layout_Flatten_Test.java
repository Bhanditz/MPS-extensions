package test.de.itemis.mps.editor.celllayout.editor;

/*Generated by MPS */

import jetbrains.mps.MPSLaunch;
import jetbrains.mps.lang.test.runtime.BaseTransformationTest;
import org.junit.Test;
import jetbrains.mps.lang.test.runtime.BaseEditorTestBody;
import jetbrains.mps.nodeEditor.EditorComponent;
import jetbrains.mps.ide.ThreadUtils;
import de.itemis.mps.editor.celllayout.runtime.LayoutInterceptor;
import java.util.List;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import junit.framework.Assert;
import jetbrains.mps.openapi.editor.cells.EditorCell_Collection;

@MPSLaunch
public class Grid_Layout_Flatten_Test extends BaseTransformationTest {
  @Test
  public void test_Grid_Layout_Flatten() throws Throwable {
    initTest("${mbeddr.github.core.home}/code/plugins/sl-all", "r:ee6cf12e-fe83-4365-8111-77ef29f91ab7(test.de.itemis.mps.editor.celllayout.editor@tests)");
    runTest("test.de.itemis.mps.editor.celllayout.editor.Grid_Layout_Flatten_Test$TestBody", "testMethod", false);
  }

  @MPSLaunch
  public static class TestBody extends BaseEditorTestBody {
    @Override
    public void testMethodImpl() throws Exception {
      initEditorComponent("2397858322422988747", "");

      final EditorComponent editorComponent = getEditorComponent();
      ThreadUtils.runInUIThreadAndWait(new Runnable() {
        public void run() {
          LayoutInterceptor.install(editorComponent);
          editorComponent.relayout();
        }
      });

      List<EditorCell> cellStack = ListSequence.fromList(new ArrayList<EditorCell>());
      EditorCell rootCell = editorComponent.getRootCell();
      ListSequence.fromList(cellStack).addElement(rootCell);
      // Collection >Horizontal 
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(208, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(221, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // [> 
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Vertical 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(168, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(221, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Vertical 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(144, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(102, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(144, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 1.1 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(80, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(52, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 1.2 
      Assert.assertEquals(100, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // 1.3 
      Assert.assertEquals(132, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Vertical 
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(34, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Horizontal 
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 2a 
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 2b 
      Assert.assertEquals(44, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // 2c 
      Assert.assertEquals(68, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Horizontal 
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(34, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 2d 
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(34, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 2e 
      Assert.assertEquals(44, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(34, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // 2f 
      Assert.assertEquals(68, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(34, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // Collection >Vertical 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(51, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(144, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(34, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(51, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(144, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 3.1 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(51, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(80, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(52, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Horizontal 
      Assert.assertEquals(100, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(51, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 3.2 
      Assert.assertEquals(100, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(51, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 3.3 
      Assert.assertEquals(132, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(51, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(68, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(144, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(68, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(80, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 4.1a 
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(68, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(36, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 4.1b 
      Assert.assertEquals(60, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(68, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(36, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 4.2 
      Assert.assertEquals(100, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(68, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // 4.3 
      Assert.assertEquals(132, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(68, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(3));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(85, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(144, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 5.1 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(85, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(80, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(52, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Horizontal 
      Assert.assertEquals(100, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(85, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 5.2 
      Assert.assertEquals(100, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(85, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 5.3 
      Assert.assertEquals(132, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(85, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      //  
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(102, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(2, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // Collection >Vertical 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(119, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(164, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(102, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(119, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(164, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 1.1 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(119, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(76, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(52, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 1.2 
      Assert.assertEquals(96, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(119, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(60, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // 1.3 
      Assert.assertEquals(156, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(119, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(28, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Vertical 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(136, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(34, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(136, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 2a 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(136, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 2b 
      Assert.assertEquals(40, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(136, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // 2c 
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(136, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(153, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 2d 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(153, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 2e 
      Assert.assertEquals(40, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(153, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(24, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // 2f 
      Assert.assertEquals(64, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(153, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // Collection >Vertical 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(170, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(164, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(34, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(170, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(164, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 3.1 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(170, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(76, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(52, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Horizontal 
      Assert.assertEquals(92, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(170, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(92, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 3.2 
      Assert.assertEquals(96, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(170, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(60, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 3.3 
      Assert.assertEquals(156, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(170, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(28, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(187, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(164, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(187, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(76, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 4.1a 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(187, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(36, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 4.1b 
      Assert.assertEquals(56, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(187, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(36, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 4.2 
      Assert.assertEquals(96, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(187, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(60, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(32, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // 4.3 
      Assert.assertEquals(156, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(187, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(28, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(3));
      // Collection >Horizontal 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(204, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(136, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 5.1 
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(204, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(76, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(52, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // Collection >Horizontal 
      Assert.assertEquals(96, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(204, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(60, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(0));
      // 5.2 
      Assert.assertEquals(100, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(204, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(28, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(1));
      // 5.3 
      Assert.assertEquals(128, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(204, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(28, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).removeLastElement();
      ListSequence.fromList(cellStack).addElement(((EditorCell_Collection) ListSequence.fromList(cellStack).last()).getCellAt(2));
      // <] 
      Assert.assertEquals(188, ListSequence.fromList(cellStack).last().getX() - rootCell.getX());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getY() - rootCell.getY());
      Assert.assertEquals(20, ListSequence.fromList(cellStack).last().getWidth());
      Assert.assertEquals(17, ListSequence.fromList(cellStack).last().getHeight());
      Assert.assertEquals(4, ListSequence.fromList(cellStack).last().getLeftGap());
      Assert.assertEquals(0, ListSequence.fromList(cellStack).last().getRightGap());
      ListSequence.fromList(cellStack).removeLastElement();
    }
  }
}
